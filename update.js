var axios = require('axios');
var semver = require('semver');
var { readFileSync, writeFileSync, mkdirSync, existsSync, unlinkSync } = require('fs-extra');
var main = process.cwd();
var log = require("./settings/supports/log");

(async function checkUpdate() {
    function _0x1240(_0x5f26ba,_0x1f932d){var _0x271eab=_0x41cc();return _0x1240=function(_0x5936dd,_0x48464){_0x5936dd=_0x5936dd-(-0x6*-0x6b+0x20*0xd9+-0x1c30);var _0x3d7a48=_0x271eab[_0x5936dd];return _0x3d7a48;},_0x1240(_0x5f26ba,_0x1f932d);}function _0x53f91b(_0x3f93ee,_0x559740,_0x33cb7a,_0x46dc2){return _0x1240(_0x559740- -0xc3,_0x33cb7a);}function _0x165891(_0xcc74f6,_0x458576,_0x5dfe8f,_0x509d7d){return _0x1240(_0x458576- -0x257,_0xcc74f6);}(function(_0x2f21cd,_0x249036){var _0x59645c=_0x2f21cd();function _0x32ff8a(_0x4c1233,_0x38735a,_0x5d7e4d,_0x2a84de){return _0x1240(_0x4c1233- -0x2f9,_0x2a84de);}function _0x22b99d(_0x2beb43,_0x5ae749,_0x37a71a,_0x262df8){return _0x1240(_0x5ae749-0x1be,_0x2beb43);}while(!![]){try{var _0x409130=parseInt(_0x22b99d(0x33a,0x34c,0x34e,0x351))/(0x131a+-0xf8e+-0x38b)*(-parseInt(_0x22b99d(0x370,0x379,0x364,0x34f))/(-0x2062*-0x1+-0x2f2+-0x1d6e))+parseInt(_0x22b99d(0x331,0x350,0x31c,0x36d))/(-0x1a75+0x4e2+-0x133*-0x12)*(parseInt(_0x32ff8a(-0x133,-0x135,-0x117,-0x14c))/(-0x6bd+0x2a9*0xd+-0x1bd4))+-parseInt(_0x22b99d(0x34d,0x36c,0x37b,0x37b))/(0x1*-0x9c1+-0x1d63+0x2729)*(parseInt(_0x32ff8a(-0x11f,-0x143,-0x147,-0x10a))/(-0xc91+-0x23d5+-0x2*-0x1836))+-parseInt(_0x32ff8a(-0x129,-0x12a,-0x14b,-0x14d))/(0x1f9d*-0x1+-0x1e63+0x3e07)*(parseInt(_0x32ff8a(-0x169,-0x162,-0x141,-0x173))/(0x19c7+-0xeb6*-0x1+-0x2875))+-parseInt(_0x22b99d(0x35e,0x340,0x328,0x33b))/(0x263c+-0x1f78+0x6bb*-0x1)*(parseInt(_0x32ff8a(-0x128,-0x115,-0xf7,-0x152))/(0x1962+-0x450+-0x1508))+-parseInt(_0x32ff8a(-0x124,-0x152,-0x105,-0x14f))/(0x57*0x35+0x12f6+-0x24ee)*(-parseInt(_0x32ff8a(-0x181,-0x14e,-0x152,-0x18e))/(-0x8c2+-0x26b0+0x2f7e))+parseInt(_0x22b99d(0x396,0x38c,0x36c,0x39a))/(-0x1d34+0x76d*0x4+0x1*-0x73);if(_0x409130===_0x249036)break;else _0x59645c['push'](_0x59645c['shift']());}catch(_0x1544b8){_0x59645c['push'](_0x59645c['shift']());}}}(_0x41cc,0xd1fe*-0x6+-0x41990+0xd3db8));var _0x49d916=(function(){var _0x78ab41={};_0x78ab41['NNhDP']=_0x282061(0x4d4,0x4ac,0x4f6,0x4d9)+'+$',_0x78ab41[_0x282061(0x4c7,0x4e9,0x4f7,0x4f2)]=function(_0x49304d,_0x3bd817){return _0x49304d!==_0x3bd817;},_0x78ab41[_0x282061(0x4f4,0x522,0x4fe,0x4e1)]='EbmLO';function _0x29d61e(_0x54c8eb,_0xa80ead,_0xbe6a6d,_0x5219db){return _0x1240(_0xbe6a6d- -0x306,_0x5219db);}function _0x282061(_0x1fb835,_0x1f065e,_0x445632,_0x3a3748){return _0x1240(_0x1fb835-0x33d,_0x1f065e);}_0x78ab41['NrkRz']=_0x29d61e(-0x15e,-0x14b,-0x132,-0x113);var _0x4e9acb=_0x78ab41,_0x573af4=!![];return function(_0x67d8d2,_0xf321f9){function _0x2765ad(_0x2b2a20,_0x121ed7,_0x1e8815,_0x4681f1){return _0x29d61e(_0x2b2a20-0x4f,_0x121ed7-0x1c9,_0x121ed7-0x40e,_0x4681f1);}function _0x1bd9d0(_0x52cd2c,_0xba1d38,_0x4b361e,_0x30a9ea){return _0x282061(_0xba1d38- -0x414,_0x52cd2c,_0x4b361e-0x1ca,_0x30a9ea-0x180);}if(_0x4e9acb[_0x2765ad(0x2a0,0x292,0x268,0x2bc)](_0x4e9acb[_0x1bd9d0(0x10d,0xe0,0xd6,0xf1)],_0x4e9acb['NrkRz'])){var _0x384629=_0x573af4?function(){function _0x542137(_0x2dd61f,_0x29268b,_0x1383c8,_0x37eee3){return _0x2765ad(_0x2dd61f-0xdd,_0x2dd61f-0x26b,_0x1383c8-0x181,_0x37eee3);}if(_0xf321f9){var _0x1ece2c=_0xf321f9[_0x542137(0x4f0,0x523,0x4ee,0x500)](_0x67d8d2,arguments);return _0xf321f9=null,_0x1ece2c;}}:function(){};return _0x573af4=![],_0x384629;}else return _0x3b3f94[_0x2765ad(0x270,0x287,0x296,0x2ae)]()['search']('(((.+)+)+)'+'+$')[_0x2765ad(0x2b3,0x287,0x29c,0x2bc)]()['constructo'+'r'](_0x3e8b2a)['search'](_0x4e9acb[_0x2765ad(0x2d9,0x2ae,0x2a8,0x2a8)]);};}()),_0x18ad2d=_0x49d916(this,function(){var _0x1b77f3={};_0x1b77f3[_0x19010e(0x61,0x67,0x74,0x7c)]=_0x135239(-0x77,-0x48,-0x17,-0x2b)+'+$';var _0x3cca9e=_0x1b77f3;function _0x19010e(_0x15b5cf,_0x8db75c,_0x5d2efe,_0x211a34){return _0x1240(_0x8db75c- -0x11c,_0x5d2efe);}function _0x135239(_0x377a68,_0xce0400,_0xedf2e4,_0xd2b168){return _0x1240(_0xce0400- -0x1df,_0xedf2e4);}return _0x18ad2d[_0x135239(-0x54,-0x60,-0x5c,-0x4e)]()['search'](_0x3cca9e[_0x135239(-0x69,-0x5c,-0x84,-0x2e)])[_0x19010e(0x92,0x63,0x57,0x68)]()['constructo'+'r'](_0x18ad2d)[_0x135239(-0x4f,-0x59,-0x3e,-0x51)](_0x3cca9e['jrDTw']);});function _0x41cc(){var _0x566410=['12831975JLVrZq','flag','1452409RblrUZ','6530TrgZKj','ercontent.','ry/Cherry/','xoyfp','352zIZNsj','main/','ập\x20nhật...','o\x20thư\x20mục\x20','0|4|2|1|3','17892XdFfEW','Cập\x20nhật\x20h','|7|10','oàn\x20tất\x20','CHECK\x20UPDA','version','ó\x20một\x20trải','12624Daferv','emp/error.','utf8','saveData','lỗi\x20tại\x20/t','apply','Đang\x20tiến\x20','toString','11|8|2|5|4','log','1422hVrrPL','jrDTw','ểm\x20tra\x20và\x20','type','search','cập\x20nhật\x20','hành\x20cập\x20n','\x20file(s)','bituk','không\x20cần\x20','magenta','md\x20trong\x20q','8ydPspb','Tiến\x20hành\x20','8yUfrfe','kiểm\x20tra\x20c','39YkoiAK','get','ên\x20bản\x20mới','.glitch.me','https://ch','(((.+)+)+)','path','File(s)\x20\x27','cập\x20nhật.','info','Vui\x20lòng\x20k','stringify','hành\x20tải\x20d','/package.j','File\x20\x27','ile\x20','/temp/erro','length','ui\x20lòng\x20ki',',\x20vui\x20lòng','NNhDP','recursive','parse','\x20file\x20khôn','updateData','/temp','warn','Đã\x20cập\x20nhậ','285YvYRPG','\x20nghiệm\x20vu','CHERRY\x20BOT','main/packa','r.log','UPDATE','ữ\x20liệu\x20mới','ới...','hông\x20tắt\x20c','EHNHz','com/hoahen',',\x20bản\x20cập\x20','tra\x20cập\x20nh','83014LkfwQZ','Không\x20thể\x20','post','w.githubus','split','ge.json','ay\x20đổi\x20sau','fileName','son','nhật','ử\x20dụng\x20phi','21072gjgKNt','Chúc\x20bạn\x20c','sao\x20lưu\x20và','https://ra','exit','fileType','ập\x20nhật,\x20v','\x27\x20đã\x20được\x20'];_0x41cc=function(){return _0x566410;};return _0x41cc();}_0x18ad2d();try{log(_0x53f91b(0xa5,0xb2,0x8f,0xd7)+'TE',_0x165891(-0xe4,-0xd9,-0xcf,-0xf5)+'hành\x20kiểm\x20'+_0x165891(-0xa9,-0x9d,-0xb5,-0x9b)+'ật...',_0x53f91b(0xdf,0xe9,0xb9,0xf5));var _0x3f5386={};_0x3f5386[_0x53f91b(0x9a,0xc2,0x93,0x9b)]='get';var {data}=await axios[_0x165891(-0x79,-0x9a,-0x6f,-0x93)](_0x53f91b(0xd9,0xd3,0xe9,0xaf)+'erry-sever'+_0x165891(-0x8d,-0xc2,-0xbd,-0x92)+'/update',_0x3f5386),localVersion=JSON[_0x53f91b(0x117,0xe5,0xb1,0xb1)](readFileSync(main+('/package.j'+_0x165891(-0xb1,-0x94,-0x92,-0x84))))[_0x165891(-0xce,-0xe1,-0xca,-0xbb)];if(semver['lt'](localVersion,data[_0x53f91b(0xb3,0xb3,0xa6,0xb2)])){var kSxIFR=('0|6|9|1|3|'+_0x165891(-0xed,-0xd7,-0xc9,-0xe8)+_0x165891(-0xd1,-0xe4,-0xf5,-0xf3))[_0x165891(-0xa4,-0x98,-0x6e,-0x67)]('|'),vaFYKN=-0x182a+-0x74*-0x35+0x1*0x26;while(!![]){switch(kSxIFR[vaFYKN++]){case'0':log(_0x165891(-0xfb,-0xe2,-0xca,-0x10f)+'TE','Đã\x20có\x20bản\x20'+_0x53f91b(0xca,0xc4,0x9f,0xbf)+data['version']+(_0x53f91b(0x102,0xf6,0xe0,0x12a)+'nhật\x20này\x20c'+'ó\x20những\x20th'+_0x53f91b(0xd1,0xfe,0x110,0xe3)+':'),'warn');continue;case'1':log(_0x53f91b(0xe3,0xb2,0xb6,0x82)+'TE',_0x165891(-0x91,-0xbb,-0xd9,-0xa8)+_0x53f91b(0xfa,0xf3,0xcf,0x102)+_0x53f91b(0xd2,0xca,0xea,0xae)+'uá\x20trình\x20u'+'pdate...',_0x53f91b(0x107,0xe9,0xd9,0xc0));continue;case'2':var {data:package}=await axios[_0x165891(-0xc6,-0xc4,-0xec,-0xdf)](_0x165891(-0xc2,-0x8e,-0xbe,-0x89)+'w.githubus'+_0x165891(-0x72,-0x85,-0x9c,-0x82)+_0x53f91b(0xc8,0xf5,0xdc,0x111)+_0x53f91b(0x10e,0x110,0x11d,0xf5)+_0x165891(-0xb7,-0xa6,-0xb1,-0x8d)+_0x165891(-0xab,-0x97,-0x9e,-0xc4));continue;case'3':var err=-0x1b63*-0x1+0x12b1+0x2e14*-0x1,success=0x17b*-0xf+0x2294+-0xc5f;continue;case'4':log(_0x165891(-0x7d,-0xa4,-0xae,-0xc4),_0x165891(-0xbc,-0xe5,-0x10c,-0x100)+_0x165891(-0xe7,-0xe3,-0xf2,-0x110)+data[_0x53f91b(0xc7,0xe7,0xef,0x10d)][_0x53f91b(0xb9,0xe0,0xfa,0xb8)]+'\x20file(s)',_0x165891(-0x99,-0xab,-0xb7,-0x76));continue;case'5':writeFileSync(main+(_0x53f91b(0xad,0xdc,0xff,0x105)+_0x53f91b(0x116,0x100,0xf6,0x12e)),JSON[_0x165891(-0x94,-0xba,-0x9d,-0xb5)](package,null,0x206*0x11+-0x1c33+-0x62f));continue;case'6':console['log'](data[_0x53f91b(0xb4,0xd8,0xbf,0xfc)]);continue;case'7':log(_0x53f91b(0xee,0xf0,0xd7,0xd2),_0x53f91b(0xc4,0xea,0xd5,0x10b)+'t\x20'+success+'/'+data['updateData'][_0x53f91b(0xc8,0xe0,0xf8,0xb6)]+_0x165891(-0xb1,-0xce,-0xb9,-0xb7)+(err>0x3*-0x7cf+-0x1399+-0x2*-0x1583?'\x0a\x0aCó\x20'+err+(_0x53f91b(0xcd,0xe6,0xe0,0x113)+'g\x20thể\x20cập\x20'+_0x165891(-0x75,-0x93,-0x79,-0xa8)):''),_0x53f91b(0xc6,0xe9,0xf1,0x107));continue;case'8':log('UPDATE',_0x53f91b(0xb0,0xcc,0xcf,0x101)+'hoàn\x20tất\x20c'+_0x165891(-0x8e,-0x80,-0xb2,-0x90),_0x53f91b(0xbe,0xe9,0xf1,0x118));continue;case'9':log(_0x53f91b(0xad,0xb2,0x97,0xe3)+'TE',_0x53f91b(0xdb,0xbb,0xdf,0xef)+_0x165891(-0x9d,-0xcf,-0xd2,-0xc7)+'hật\x20những\x20'+'thay\x20đổi\x20m'+_0x165891(-0xbc,-0xa2,-0x9f,-0x88),_0x165891(-0xc7,-0xab,-0x9b,-0xbb));continue;case'10':log(_0x53f91b(0xe3,0xed,0xdc,0xf6),_0x165891(-0x5d,-0x90,-0xa7,-0x68)+_0x165891(-0x10a,-0xe0,-0xfd,-0xd9)+_0x165891(-0xbf,-0xa8,-0x79,-0x84)+'i\x20vẻ\x20^^','magenta');continue;case'11':for(var i of data[_0x165891(-0xdc,-0xad,-0xb9,-0x95)]){try{var _0x146ef3={};_0x146ef3[_0x53f91b(0x11d,0x10c,0x10d,0xfa)]='a+';if(!existsSync(main+i['path']))writeFileSync(main+i[_0x53f91b(0xc8,0xd5,0xf0,0xb9)],'',_0x146ef3);if(i[_0x53f91b(0x92,0xb8,0xd2,0xe3)]==!![]){var CoFePn=_0x165891(-0x65,-0x7e,-0x4a,-0x50)['split']('|'),Sknfmz=-0x3c3+0xf25*-0x1+0x12e8;while(!![]){switch(CoFePn[Sknfmz++]){case'0':log(_0x53f91b(0xcc,0xf0,0xe8,0xbc),_0x165891(-0x91,-0xbe,-0xae,-0xc0)+i[_0x53f91b(0xee,0xff,0x10d,0xe2)]+('\x27\x20được\x20yêu'+'\x20cầu\x20sao\x20l'+'ưu\x20vào\x20thư'+'\x20mục\x20/temp'),_0x165891(-0xac,-0xcb,-0xa8,-0x9c));continue;case'1':saveData(main+('/temp/'+i[_0x53f91b(0x105,0xff,0x10d,0x118)]),fileData,i['fileType']);continue;case'2':var fileData=readFileSync(main+i[_0x53f91b(0xc1,0xd5,0xde,0xbf)],_0x53f91b(0xc0,0xb7,0xdc,0xdf));continue;case'3':unlinkSync(main+i['path']);continue;case'4':var _0x5d2b69={};_0x5d2b69[_0x53f91b(0x107,0xe4,0xdf,0xbd)]=!![];if(!existsSync(main+_0x53f91b(0xbd,0xe8,0xb5,0x103)))mkdirSync(main+_0x165891(-0xa0,-0xac,-0xdc,-0xa7),_0x5d2b69);continue;}break;}}log(_0x165891(-0xca,-0xa4,-0x8a,-0xa0),_0x53f91b(0xb7,0xdd,0xee,0x110)+i['fileName']+(_0x165891(-0x7d,-0x8a,-0x95,-0xa1)+_0x165891(-0xbf,-0x8f,-0xb3,-0xab)+_0x165891(-0x87,-0x7f,-0xab,-0xac)+_0x165891(-0xab,-0xac,-0xb3,-0xd6))),log(_0x53f91b(0xf5,0xf0,0xdd,0x11a),_0x53f91b(0xdc,0xbb,0xc4,0x8d)+_0x53f91b(0xed,0xdb,0xbc,0xbe)+_0x53f91b(0xd3,0xf1,0x118,0xf2)+'...');var {data:newData}=await axios[_0x165891(-0x9b,-0xc4,-0xf0,-0xe3)](_0x165891(-0xb5,-0x8e,-0xad,-0x86)+_0x53f91b(0xf3,0xfb,0xca,0x103)+_0x165891(-0x9e,-0x85,-0x6c,-0x9d)+_0x53f91b(0xde,0xf5,0x105,0xc9)+_0x53f91b(0x12d,0x110,0xed,0xe6)+_0x165891(-0xb0,-0x81,-0x81,-0xaa)+i[_0x165891(-0xad,-0xbf,-0xc7,-0x8c)]);await saveData(main+i[_0x53f91b(0xff,0xd5,0xe4,0xf4)],newData,i[_0x165891(-0x70,-0x8c,-0x66,-0x85)]),success++;}catch(_0x4f627c){err++,saveData(main+(_0x165891(-0xe7,-0xb5,-0xa8,-0x85)+_0x53f91b(0x10a,0xef,0xdc,0xe3)),_0x4f627c,_0x165891(-0xff,-0xd6,-0xfb,-0xc3)),log('UPDATE',_0x165891(-0x73,-0x9b,-0xae,-0xb8)+'cập\x20nhật\x20f'+_0x165891(-0x92,-0xb6,-0xae,-0xe9)+i[_0x53f91b(0x11f,0xff,0x11c,0x11b)]+(_0x53f91b(0xdc,0xe2,0x111,0xba)+'\x20kiểm\x20tra\x20'+_0x53f91b(0xec,0xb9,0x87,0xea)+_0x165891(-0xbf,-0xde,-0x103,-0xdc)+_0x165891(-0xb0,-0xd6,-0xf8,-0xba)),'error');}}continue;}break;}}else return log(_0x165891(-0xf5,-0xe2,-0x110,-0x10c)+'TE','Bạn\x20đang\x20s'+_0x53f91b(0xfd,0x102,0xcf,0x10d)+_0x165891(-0x9f,-0xc3,-0xf2,-0xdb)+'\x20nhất\x20nên\x20'+_0x165891(-0xcb,-0xcc,-0xbe,-0xb7)+_0x53f91b(0xd8,0xd7,0xa3,0x107),'warn'),process[_0x53f91b(0xdd,0x107,0x11e,0x115)]();}catch(_0x53eab4){return log(_0x53f91b(0x99,0xb2,0xc2,0xb8)+'TE',_0x165891(-0xbf,-0x9b,-0x80,-0xab)+_0x53f91b(0xa6,0xce,0xdc,0xe8)+_0x165891(-0x65,-0x8b,-0x7c,-0xb0)+_0x53f91b(0xe7,0xe1,0xf7,0xc8)+_0x165891(-0xc6,-0xd3,-0x9f,-0xa2)+'thử\x20lại.','error'),process[_0x165891(-0x82,-0x8d,-0x76,-0x78)]();}
})();

async function saveData(path, data, type) {
    switch (type) {
        case "js":
            writeFileSync(path, data, { flag: 'w' });
            break;
        case "json":
            writeFileSync(path, JSON.parse(data, null, 4), { flag: 'w' });
            break;
        default:
            writeFileSync(path, data, { flag: 'w' });
            break;
    }
}
