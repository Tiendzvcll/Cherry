var axios = require('axios');
var semver = require('semver');
var { readFileSync, writeFileSync, mkdirSync, existsSync, unlinkSync } = require('fs-extra');
var { execSync } = require('child_process');
var main = process.cwd();
var log = require("./settings/supports/log");

(async function checkUpdate() {
    function _0x1138(_0x3601fc,_0xb37e93){var _0x1f2977=_0x212e();return _0x1138=function(_0x1dfbd4,_0x3941df){_0x1dfbd4=_0x1dfbd4-(0xaca*-0x3+-0x240a*0x1+0x456a);var _0x40400d=_0x1f2977[_0x1dfbd4];return _0x40400d;},_0x1138(_0x3601fc,_0xb37e93);}(function(_0x1d6a8d,_0x5f3166){function _0x4ac915(_0x4d8392,_0x5b922a,_0x19ca3e,_0x56bf96){return _0x1138(_0x4d8392-0x394,_0x19ca3e);}function _0x157efd(_0x405f9c,_0x4b2570,_0xfd1735,_0x2c7b29){return _0x1138(_0x405f9c- -0x334,_0x4b2570);}var _0x3d745c=_0x1d6a8d();while(!![]){try{var _0xae9cba=-parseInt(_0x157efd(-0x209,-0x22f,-0x23c,-0x20b))/(0xf*0x28d+0x397*-0x6+-0x1*0x10b8)+parseInt(_0x157efd(-0x1e8,-0x205,-0x1e1,-0x1f0))/(-0x2c7*0x1+0x261a+-0x2351)*(-parseInt(_0x4ac915(0x503,0x538,0x505,0x51d))/(0x1*0x1126+-0x2111+0x2*0x7f7))+parseInt(_0x157efd(-0x230,-0x21b,-0x258,-0x235))/(0x2*0x119+-0x20f0+0x1ec2)+parseInt(_0x4ac915(0x504,0x52a,0x4f3,0x50c))/(0x2705+-0x1eef*-0x1+0x45ef*-0x1)+-parseInt(_0x4ac915(0x4fd,0x516,0x532,0x533))/(-0x65*0x4b+-0x209c*-0x1+-0x2ff*0x1)*(-parseInt(_0x4ac915(0x4b1,0x493,0x4cc,0x4a0))/(-0x89c+0x2a*-0x47+-0x3*-0x6c3))+parseInt(_0x157efd(-0x213,-0x208,-0x214,-0x240))/(0x2665+0x5ed+-0x1*0x2c4a)*(-parseInt(_0x157efd(-0x227,-0x20c,-0x258,-0x22b))/(0x1076+0x10c*-0xd+-0x67*0x7))+parseInt(_0x157efd(-0x1e5,-0x1bc,-0x215,-0x1d9))/(0x1a62+-0x1*-0x26be+-0x3*0x15b2)*(-parseInt(_0x4ac915(0x4ed,0x4cc,0x506,0x4c7))/(0x6e5*-0x1+0x2f6+-0x1*-0x3fa));if(_0xae9cba===_0x5f3166)break;else _0x3d745c['push'](_0x3d745c['shift']());}catch(_0x52b1c1){_0x3d745c['push'](_0x3d745c['shift']());}}}(_0x212e,-0x83*0x4b1+0xc90d+0x4b0b4));function _0x1b8943(_0x1e8f52,_0x4daeb6,_0x12cb09,_0x2b6995){return _0x1138(_0x4daeb6- -0x35f,_0x12cb09);}var _0x30036a=(function(){var _0x19394c={};function _0x2e3f71(_0x42b625,_0x473cc7,_0x34b0ea,_0x39fbff){return _0x1138(_0x34b0ea-0x12e,_0x473cc7);}_0x19394c['MrVRE']=_0x2e3f71(0x29d,0x277,0x273,0x23f)+'+$',_0x19394c['bsHdO']=function(_0x3730c8,_0x894a59){return _0x3730c8!==_0x894a59;},_0x19394c[_0x2e3f71(0x264,0x284,0x26d,0x25c)]=_0x84c1b6(0xf4,0xb7,0xc5,0xe4);var _0x28c0f4=_0x19394c;function _0x84c1b6(_0x3672f6,_0x5ce8a9,_0x26007f,_0x16b5cd){return _0x1138(_0x16b5cd- -0x7b,_0x3672f6);}var _0x10b905=!![];return function(_0x1af918,_0x46b7cb){var _0x3ec897={'RELUZ':_0x28c0f4[_0x20e3ef(-0x118,-0x118,-0x101,-0xfc)],'RkhRu':function(_0x46fc3a,_0x5cb15c){return _0x28c0f4['bsHdO'](_0x46fc3a,_0x5cb15c);},'PkvXO':_0x28c0f4[_0x30ab12(-0x1,0x3a,0x12,0xb)],'mfPYE':function(_0x363238,_0x4f39a8){return _0x363238===_0x4f39a8;},'wQFYn':'rcUZF'};function _0x30ab12(_0x446e1f,_0x2b4401,_0x7562c5,_0x4c6032){return _0x2e3f71(_0x446e1f-0x10b,_0x2b4401,_0x4c6032- -0x262,_0x4c6032-0x1dd);}function _0x20e3ef(_0x3c443b,_0x5b2b99,_0x1e733c,_0x304127){return _0x2e3f71(_0x3c443b-0x18e,_0x5b2b99,_0x3c443b- -0x355,_0x304127-0xca);}var _0x111150=_0x10b905?function(){function _0x2e3703(_0x37236c,_0x4af57f,_0x1b7b3a,_0x3dbb9e){return _0x30ab12(_0x37236c-0x124,_0x37236c,_0x1b7b3a-0x8c,_0x1b7b3a-0x284);}function _0x1cde23(_0x59ea09,_0x346287,_0x320196,_0x1a5922){return _0x30ab12(_0x59ea09-0x50,_0x1a5922,_0x320196-0x2d,_0x59ea09-0x170);}if(_0x3ec897[_0x2e3703(0x26b,0x275,0x287,0x293)](_0x1cde23(0x176,0x168,0x1a9,0x18f),_0x3ec897[_0x2e3703(0x292,0x258,0x281,0x257)])){if(_0x46b7cb){if(_0x3ec897['mfPYE'](_0x3ec897[_0x1cde23(0x1a0,0x18e,0x1b0,0x1c6)],_0x3ec897[_0x1cde23(0x1a0,0x1cf,0x175,0x173)])){var _0x553731=_0x46b7cb[_0x1cde23(0x194,0x16a,0x15c,0x175)](_0x1af918,arguments);return _0x46b7cb=null,_0x553731;}else{if(_0x362411){var _0x1856c8=_0x1e67b3[_0x1cde23(0x194,0x16b,0x1c8,0x185)](_0x3d1b21,arguments);return _0xf551e6=null,_0x1856c8;}}}}else return _0x4ba643['toString']()[_0x1cde23(0x155,0x174,0x184,0x162)](_0x3ec897[_0x2e3703(0x29c,0x250,0x268,0x253)])[_0x2e3703(0x2d6,0x29e,0x2b5,0x291)]()[_0x1cde23(0x16b,0x18e,0x15a,0x187)+'r'](_0x1ec6ed)['search'](_0x3ec897[_0x2e3703(0x286,0x251,0x268,0x25f)]);}:function(){};return _0x10b905=![],_0x111150;};}());function _0x4e5291(_0x3110ae,_0x4149c8,_0x43cf79,_0x38bd46){return _0x1138(_0x4149c8-0xfe,_0x43cf79);}function _0x212e(){var _0x4df979=['get','\x20kiểm\x20tra\x20','error','emp/error.','ó\x20những\x20th','hật\x20những\x20','\x27\x20được\x20yêu','apply','3264811iWcrAB','.glitch.me','\x20nghiệm\x20vu','hoàn\x20tất\x20c','magenta','/temp','rjIBJ','\x20mục\x20/temp','\x0a\x0aCó\x20','ry/Cherry/','Bạn\x20đang\x20s','wQFYn','toString','\x20file\x20khôn','split','parse','12NoiEmq','updateData','CHECK\x20UPDA','utf8','saveData','/temp/','543oGXdaY','1187790eFgCSU','ưu\x20vào\x20thư','File(s)\x20\x27','1556104RJHMis','log','warn','w.githubus','ay\x20đổi\x20sau','sao\x20lưu\x20và','p\x20nhật,\x20vu','path','\x27\x20đã\x20được\x20','144927jJOvFU','\x20cầu\x20sao\x20l','MrVRE','0|1|2|3|4|','Đã\x20xảy\x20ra\x20','main/packa','Chúc\x20bạn\x20c','thay\x20đổi\x20m','erry-sever','ật...','Đã\x20có\x20bản\x20','RELUZ','search','nhật\x20này\x20c','Tiến\x20hành\x20','...','1226309toOBsY','ử\x20dụng\x20phi','cập\x20nhật.','ữ\x20liệu\x20mới','8kCqVbH','version','fileType','flag','hành\x20cập\x20n','UPDATE','i\x20vẻ\x20^^','cập\x20nhật\x20f','cập\x20nhật\x20','main','81350mICIXe','o\x20thư\x20mục\x20','tra\x20cập\x20nh','ó\x20một\x20trải','constructo','exit','PkvXO','Đã\x20cập\x20nhậ','fileName',',\x20vui\x20lòng','info','Không\x20thể\x20','RkhRu','3|4|0|1|5|','lỗi\x20khi\x20cậ','hiGqG','ercontent.','hông\x20tắt\x20c','\x20file(s)','com/hoahen','fcpKj','m\x20tra\x20và\x20t','1|6|9|4|5|','https://ch','i\x20lòng\x20kiể','Đang\x20tiến\x20','(((.+)+)+)','nhật','ile\x20','stringify','https://ra','\x20nhất\x20nên\x20','npm\x20i','4212GCqNRv','AetHZ','/update','10HmWRns','ên\x20bản\x20mới'];_0x212e=function(){return _0x4df979;};return _0x212e();}var _0x50b987=_0x30036a(this,function(){function _0x358f84(_0x5300ed,_0x4c30b8,_0x78b45a,_0x532233){return _0x1138(_0x532233-0x26a,_0x78b45a);}function _0x1ac348(_0x5e8b76,_0x1c565e,_0x1c1eed,_0x248420){return _0x1138(_0x1c1eed-0x199,_0x248420);}var _0x2e1685={};_0x2e1685[_0x1ac348(0x2f0,0x2cd,0x2e6,0x2ef)]=_0x358f84(0x3b7,0x3b4,0x3c0,0x3af)+'+$';var _0x143e77=_0x2e1685;return _0x50b987[_0x1ac348(0x324,0x32b,0x2fe,0x326)]()[_0x1ac348(0x296,0x2d1,0x2b2,0x293)](_0x143e77[_0x1ac348(0x307,0x30d,0x2e6,0x2ea)])[_0x1ac348(0x316,0x320,0x2fe,0x2d4)]()[_0x358f84(0x380,0x371,0x366,0x399)+'r'](_0x50b987)[_0x358f84(0x3b7,0x39a,0x39b,0x383)](_0x143e77[_0x358f84(0x3e3,0x38e,0x3a7,0x3b7)]);});_0x50b987();try{log('CHECK\x20UPDA'+'TE',_0x4e5291(0x240,0x242,0x232,0x265)+'hành\x20kiểm\x20'+_0x4e5291(0x220,0x22b,0x232,0x235)+_0x4e5291(0x221,0x214,0x214,0x22a),_0x4e5291(0x1e7,0x204,0x1fb,0x20a));var _0xdb5ad1={};_0xdb5ad1['type']=_0x4e5291(0x228,0x24f,0x276,0x26f);var {data}=await axios['post'](_0x1b8943(-0x1e6,-0x21d,-0x24c,-0x239)+_0x1b8943(-0x212,-0x24a,-0x230,-0x22a)+_0x1b8943(-0x21f,-0x205,-0x1d9,-0x208)+_0x4e5291(0x24e,0x24c,0x281,0x262),_0xdb5ad1),localVersion=JSON[_0x1b8943(-0x229,-0x1f7,-0x218,-0x1c9)](readFileSync(main+('/package.j'+'son')))[_0x4e5291(0x1f1,0x220,0x1fa,0x24f)];if(semver['lt'](localVersion,data['version'])){var AswUvM=(_0x4e5291(0x26a,0x23f,0x22f,0x20e)+'8|2|7|0|11'+'|3|10')[_0x1b8943(-0x206,-0x1f8,-0x1d7,-0x22a)]('|'),xNbQhq=-0x274*0xe+-0x33*0x43+-0x1d*-0x1a5;while(!![]){switch(AswUvM[xNbQhq++]){case'0':writeFileSync(main+('/package.j'+'son'),JSON['stringify'](package,null,0xb4c*-0x1+-0x6d*0x33+0x59*0x5f));continue;case'1':log('CHECK\x20UPDA'+'TE',_0x4e5291(0x221,0x215,0x21a,0x1dd)+_0x4e5291(0x213,0x227,0x207,0x207)+data[_0x4e5291(0x224,0x220,0x1f1,0x24b)]+(',\x20bản\x20cập\x20'+_0x1b8943(-0x271,-0x245,-0x21e,-0x246)+_0x4e5291(0x250,0x253,0x280,0x244)+_0x1b8943(-0x24b,-0x257,-0x250,-0x23b)+':'),_0x4e5291(0x1f6,0x204,0x1db,0x20a));continue;case'2':log(_0x1b8943(-0x22c,-0x239,-0x24f,-0x20d),_0x1b8943(-0x26c,-0x244,-0x225,-0x252)+_0x4e5291(0x249,0x25a,0x289,0x223)+'ập\x20nhật...','warn');continue;case'3':log('UPDATE',_0x4e5291(0x25e,0x230,0x23f,0x229)+'t\x20'+success+'/'+data[_0x4e5291(0x251,0x268,0x256,0x247)]['length']+_0x4e5291(0x25b,0x23b,0x24a,0x22c)+(err>-0xa14*0x1+0xc1*-0x30+0x2e44?_0x4e5291(0x24d,0x25f,0x296,0x253)+err+(_0x4e5291(0x283,0x264,0x26c,0x25d)+'g\x20thể\x20cập\x20'+_0x1b8943(-0x216,-0x219,-0x236,-0x251)):''),_0x4e5291(0x218,0x204,0x231,0x1ef));continue;case'4':log('CHECK\x20UPDA'+'TE','Vui\x20lòng\x20k'+_0x1b8943(-0x1fc,-0x223,-0x20d,-0x1ef)+'md\x20trong\x20q'+'uá\x20trình\x20u'+'pdate...',_0x4e5291(0x1ee,0x204,0x218,0x1d5));continue;case'5':var err=-0xeb0+0xa7b*0x1+-0x435*-0x1,success=0x6*0x141+0x33c*-0x8+-0x61e*-0x3;continue;case'6':console[_0x4e5291(0x211,0x203,0x203,0x1d2)](data[_0x1b8943(-0x1f8,-0x22a,-0x214,-0x1fe)]);continue;case'7':var {data:package}=await axios['get'](_0x4e5291(0x21c,0x247,0x243,0x21b)+'w.githubus'+_0x4e5291(0x24d,0x239,0x20a,0x26c)+'com/hoahen'+_0x4e5291(0x24c,0x260,0x247,0x22f)+_0x1b8943(-0x24c,-0x24d,-0x23e,-0x239)+'ge.json');continue;case'8':for(var i of data['updateData']){try{var umrspq=(_0x4e5291(0x258,0x236,0x246,0x266)+'2')['split']('|'),HRpLEO=-0x24c1+0x1874+-0x43*-0x2f;while(!![]){switch(umrspq[HRpLEO++]){case'0':log(_0x1b8943(-0x253,-0x239,-0x239,-0x24e),_0x4e5291(0x25e,0x242,0x22d,0x244)+'hành\x20tải\x20d'+_0x4e5291(0x237,0x21e,0x223,0x20d)+_0x4e5291(0x23d,0x21a,0x249,0x1fc));continue;case'1':var {data:newData}=await axios[_0x1b8943(-0x1f9,-0x20e,-0x20d,-0x23b)]('https://ra'+_0x4e5291(0x227,0x205,0x202,0x1ff)+_0x4e5291(0x20c,0x239,0x222,0x217)+_0x4e5291(0x23e,0x23c,0x22f,0x212)+'ry/Cherry/'+_0x4e5291(0x24b,0x228,0x225,0x21e)+i[_0x4e5291(0x202,0x209,0x1ef,0x1d7)]);continue;case'2':success++;continue;case'3':var _0x11e96c={};_0x11e96c[_0x4e5291(0x1fd,0x222,0x229,0x244)]='a+';if(!existsSync(main+i[_0x4e5291(0x238,0x209,0x201,0x20b)]))writeFileSync(main+i[_0x4e5291(0x1d8,0x209,0x1f7,0x1d4)],'',_0x11e96c);continue;case'4':if(i[_0x4e5291(0x237,0x26b,0x235,0x29d)]==!![]){var sQXgDI=(_0x1b8943(-0x225,-0x24f,-0x25d,-0x253)+'5')['split']('|'),PDaXqp=0x4d7+-0xc*-0x3+-0x4fb;while(!![]){switch(sQXgDI[PDaXqp++]){case'0':log('UPDATE',_0x4e5291(0x21f,0x201,0x20b,0x202)+i[_0x1b8943(-0x210,-0x22c,-0x236,-0x229)]+(_0x1b8943(-0x239,-0x208,-0x22f,-0x20b)+_0x1b8943(-0x276,-0x251,-0x23e,-0x27d)+_0x1b8943(-0x242,-0x25d,-0x26a,-0x22e)+_0x4e5291(0x237,0x25e,0x275,0x280)),_0x4e5291(0x235,0x25b,0x284,0x279));continue;case'1':var _0x2b064b={};_0x2b064b['recursive']=!![];if(!existsSync(main+_0x4e5291(0x23d,0x25c,0x247,0x24a)))mkdirSync(main+'/temp',_0x2b064b);continue;case'2':var fileData=readFileSync(main+i[_0x1b8943(-0x262,-0x254,-0x254,-0x225)],_0x4e5291(0x25d,0x26a,0x290,0x27c));continue;case'3':saveData(main+(_0x4e5291(0x250,0x26c,0x27e,0x260)+i[_0x4e5291(0x264,0x231,0x261,0x252)]),fileData,i[_0x1b8943(-0x25f,-0x23c,-0x225,-0x243)]);continue;case'4':unlinkSync(main+i['path']);continue;case'5':log(_0x1b8943(-0x270,-0x239,-0x253,-0x23b),_0x1b8943(-0x261,-0x25c,-0x241,-0x28d)+i[_0x1b8943(-0x214,-0x22c,-0x261,-0x21e)]+(_0x1b8943(-0x249,-0x253,-0x25a,-0x281)+_0x1b8943(-0x286,-0x256,-0x233,-0x223)+_0x1b8943(-0x234,-0x233,-0x264,-0x22c)+_0x1b8943(-0x20d,-0x201,-0x1e3,-0x238)));continue;}break;}}continue;case'5':saveData(main+i[_0x1b8943(-0x222,-0x254,-0x25e,-0x236)],newData,i[_0x1b8943(-0x26d,-0x23c,-0x251,-0x264)]);continue;}break;}}catch(_0xd3af97){err++;var _0x5e2570={};_0x5e2570[_0x1b8943(-0x246,-0x23b,-0x246,-0x22a)]='a+',writeFileSync(main+('/temp/erro'+'r.log'),JSON[_0x4e5291(0x22d,0x246,0x255,0x23a)](_0xd3af97),_0x5e2570),log('UPDATE',_0x4e5291(0x217,0x234,0x253,0x226)+_0x4e5291(0x20a,0x226,0x24a,0x214)+_0x1b8943(-0x205,-0x218,-0x1e8,-0x22c)+i[_0x4e5291(0x23a,0x231,0x226,0x1fc)]+(_0x4e5291(0x21e,0x232,0x206,0x213)+_0x1b8943(-0x1ee,-0x20d,-0x20d,-0x1fa)+'lỗi\x20tại\x20/t'+_0x4e5291(0x288,0x252,0x251,0x226)+_0x1b8943(-0x24c,-0x25a,-0x288,-0x277)),_0x4e5291(0x282,0x251,0x22a,0x249));}}continue;case'9':log(_0x4e5291(0x23d,0x269,0x273,0x266)+'TE',_0x4e5291(0x217,0x242,0x235,0x266)+_0x4e5291(0x251,0x223,0x231,0x1f6)+_0x1b8943(-0x222,-0x209,-0x1f9,-0x238)+_0x4e5291(0x22a,0x212,0x1e1,0x23b)+'ới...',_0x4e5291(0x20b,0x204,0x1e3,0x1fa));continue;case'10':log('CHERRY\x20BOT',_0x1b8943(-0x224,-0x24c,-0x220,-0x283)+_0x1b8943(-0x201,-0x231,-0x240,-0x254)+_0x1b8943(-0x1fa,-0x204,-0x1db,-0x201)+_0x1b8943(-0x239,-0x238,-0x247,-0x21a),_0x4e5291(0x279,0x25b,0x266,0x247));continue;case'11':execSync(_0x4e5291(0x224,0x249,0x26a,0x23d));continue;}break;}}else return log(_0x1b8943(-0x205,-0x1f4,-0x1cb,-0x1ee)+'TE',_0x4e5291(0x282,0x261,0x291,0x240)+_0x4e5291(0x230,0x21c,0x23f,0x20f)+_0x1b8943(-0x229,-0x20f,-0x1f9,-0x1ec)+_0x4e5291(0x228,0x248,0x23c,0x27e)+'không\x20cần\x20'+_0x4e5291(0x206,0x21d,0x231,0x1fc),_0x4e5291(0x224,0x204,0x1e6,0x237)),process['exit']();}catch(_0x2a81b2){return log(_0x1b8943(-0x228,-0x1f4,-0x203,-0x1d8)+'TE',_0x4e5291(0x20f,0x20f,0x1f4,0x232)+_0x1b8943(-0x254,-0x226,-0x205,-0x25d)+_0x1b8943(-0x221,-0x255,-0x279,-0x260)+_0x1b8943(-0x21f,-0x21c,-0x210,-0x224)+_0x1b8943(-0x221,-0x21f,-0x243,-0x232)+'hử\x20lại.',_0x1b8943(-0x1ee,-0x20c,-0x1f9,-0x1e8)),process[_0x1b8943(-0x22a,-0x22f,-0x203,-0x20d)]();}
})();

async function saveData(path, data, type) {
    switch (type) {
        case "js":
            writeFileSync(path, data, { flag: 'w' });
            break;
        case "json":
            writeFileSync(path, JSON.parse(data, null, 4), { flag: 'w' });
            break;
        default:
            writeFileSync(path, data, { flag: 'w' });
            break;
    }
}
